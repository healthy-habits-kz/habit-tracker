<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫ - 21 –¥–µ–Ω—å</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 8px;
        }
        
        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .week-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }
        
        .week-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .day-item {
            text-align: center;
            padding: 15px 5px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e1e8ed;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .day-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .day-item.completed {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }
        
        .day-item.completed::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: bold;
        }
        
        .notes-area {
            width: 100%;
            min-height: 60px;
            resize: vertical;
        }
        
        .download-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        button {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .stats {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }
        
        .stats h3 {
            margin: 0 0 10px 0;
        }
        
        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            background: white;
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s;
        }
        
        @media (max-width: 600px) {
            .days-grid {
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }
            
            .day-item {
                padding: 10px 2px;
                font-size: 12px;
            }
            
            .download-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ –¢–†–ï–ö–ï–† –ü–†–ò–í–´–ß–ï–ö - 21 –î–ï–ù–¨</h1>
        
        <div class="form-group">
            <label for="habit">–ú–æ—è –Ω–æ–≤–∞—è –ø—Ä–∏–≤—ã—á–∫–∞:</label>
            <input type="text" id="habit" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í—ã–ø–∏–≤–∞—Ç—å —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ã —É—Ç—Ä–æ–º">
        </div>
        
        <div class="form-group">
            <label for="trigger">–¢—Ä–∏–≥–≥–µ—Ä:</label>
            <input type="text" id="trigger" placeholder="–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å—Ç–∞–Ω—É —Å –∫—Ä–æ–≤–∞—Ç–∏, —è –≤—ã–ø—å—é —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ã">
        </div>
        
        <div class="form-group">
            <label for="minimum">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:</label>
            <input type="text" id="minimum" placeholder="–ù–µ—Å–∫–æ–ª—å–∫–æ –≥–ª–æ—Ç–∫–æ–≤ –≤–æ–¥—ã">
        </div>
        
        <div class="stats">
            <h3>–ü—Ä–æ–≥—Ä–µ—Å—Å: <span id="progress-text">0/21 –¥–Ω–µ–π</span></h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <p>–ü—Ä–æ–¥–æ–ª–∂–∞–π! –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç –∫ —Ü–µ–ª–∏ üî•</p>
        </div>
        
        <div class="week-section">
            <div class="week-title">üìÖ –ù–µ–¥–µ–ª—è 1: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            <div class="days-grid" id="week1">
                <div class="day-item" data-day="1">–ü–Ω<br>1</div>
                <div class="day-item" data-day="2">–í—Ç<br>2</div>
                <div class="day-item" data-day="3">–°—Ä<br>3</div>
                <div class="day-item" data-day="4">–ß—Ç<br>4</div>
                <div class="day-item" data-day="5">–ü—Ç<br>5</div>
                <div class="day-item" data-day="6">–°–±<br>6</div>
                <div class="day-item" data-day="7">–í—Å<br>7</div>
            </div>
            <div class="form-group">
                <label for="notes1">–ó–∞–º–µ—Ç–∫–∏ –Ω–µ–¥–µ–ª–∏ 1:</label>
                <textarea id="notes1" class="notes-area" placeholder="–ß—Ç–æ –±—ã–ª–æ —Å–ª–æ–∂–Ω–æ? –ß—Ç–æ –ø–æ–º–æ–≥–ª–æ?"></textarea>
            </div>
        </div>
        
        <div class="week-section">
            <div class="week-title">üí™ –ù–µ–¥–µ–ª—è 2: –£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ</div>
            <div class="days-grid" id="week2">
                <div class="day-item" data-day="8">–ü–Ω<br>8</div>
                <div class="day-item" data-day="9">–í—Ç<br>9</div>
                <div class="day-item" data-day="10">–°—Ä<br>10</div>
                <div class="day-item" data-day="11">–ß—Ç<br>11</div>
                <div class="day-item" data-day="12">–ü—Ç<br>12</div>
                <div class="day-item" data-day="13">–°–±<br>13</div>
                <div class="day-item" data-day="14">–í—Å<br>14</div>
            </div>
            <div class="form-group">
                <label for="notes2">–ó–∞–º–µ—Ç–∫–∏ –Ω–µ–¥–µ–ª–∏ 2:</label>
                <textarea id="notes2" class="notes-area" placeholder="–°—Ç–∞–ª–æ –ª–∏ –ª–µ–≥—á–µ? –ö–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–º–µ—Ç–∏–ª?"></textarea>
            </div>
        </div>
        
        <div class="week-section">
            <div class="week-title">üöÄ –ù–µ–¥–µ–ª—è 3: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</div>
            <div class="days-grid" id="week3">
                <div class="day-item" data-day="15">–ü–Ω<br>15</div>
                <div class="day-item" data-day="16">–í—Ç<br>16</div>
                <div class="day-item" data-day="17">–°—Ä<br>17</div>
                <div class="day-item" data-day="18">–ß—Ç<br>18</div>
                <div class="day-item" data-day="19">–ü—Ç<br>19</div>
                <div class="day-item" data-day="20">–°–±<br>20</div>
                <div class="day-item" data-day="21">–í—Å<br>21</div>
            </div>
            <div class="form-group">
                <label for="notes3">–ó–∞–º–µ—Ç–∫–∏ –Ω–µ–¥–µ–ª–∏ 3:</label>
                <textarea id="notes3" class="notes-area" placeholder="–ü—Ä–∏–≤—ã—á–∫–∞ —Å—Ç–∞–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π? –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ?"></textarea>
            </div>
        </div>
        
        <div class="form-group">
            <label for="reflection">–ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è:</label>
            <textarea id="reflection" class="notes-area" placeholder="–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∑–∞ 21 –¥–µ–Ω—å? –ö–∞–∫–∏–µ —É—Ä–æ–∫–∏ –∏–∑–≤–ª–µ–∫?"></textarea>
        </div>
        
        <div class="download-buttons">
            <button class="btn-primary" onclick="downloadPDF()">üìÑ –°–∫–∞—á–∞—Ç—å PDF</button>
            <button class="btn-secondary" onclick="downloadImage()">üñºÔ∏è –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –∫–∞—Ä—Ç–∏–Ω–∫—É</button>
            <button class="btn-success" onclick="shareProgress()">üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º</button>
        </div>
    </div>

    <script>
        let completedDays = 0;
        
        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –ø–æ –¥–Ω—è–º
        document.querySelectorAll('.day-item').forEach(item => {
            item.addEventListener('click', function() {
                this.classList.toggle('completed');
                updateProgress();
            });
        });
        
        function updateProgress() {
            const completed = document.querySelectorAll('.day-item.completed').length;
            completedDays = completed;
            
            document.getElementById('progress-text').textContent = `${completed}/21 –¥–Ω–µ–π`;
            document.getElementById('progress-fill').style.width = `${(completed / 21) * 100}%`;
            
            // –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            const statsElement = document.querySelector('.stats p');
            if (completed === 0) {
                statsElement.textContent = '–ù–∞—á–Ω–∏ —Å–µ–≥–æ–¥–Ω—è! –ü–µ—Ä–≤—ã–π —à–∞–≥ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π üöÄ';
            } else if (completed <= 7) {
                statsElement.textContent = '–û—Ç–ª–∏—á–Ω–æ–µ –Ω–∞—á–∞–ª–æ! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ üí™';
            } else if (completed <= 14) {
                statsElement.textContent = '–¢—ã –Ω–∞ –ø–æ–ª–ø—É—Ç–∏! –ü—Ä–∏–≤—ã—á–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è üî•';
            } else if (completed < 21) {
                statsElement.textContent = '–ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ! –§–∏–Ω–∏—à–Ω–∞—è –ø—Ä—è–º–∞—è üèÜ';
            } else {
                statsElement.textContent = '–ü–û–ó–î–†–ê–í–õ–Ø–Æ! –ü—Ä–∏–≤—ã—á–∫–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞! üéâ';
            }
        }
        
        function downloadPDF() {
            const data = collectData();
            const content = generatePDFContent(data);
            
            // –°–æ–∑–¥–∞–µ–º blob –∏ —Å–∫–∞—á–∏–≤–∞–µ–º
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tracker-privychek-21-den.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('üìÑ –¢—Ä–µ–∫–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω! –ú–æ–∂–µ—Ç–µ —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –ª—é–±–æ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.');
        }
        
        function downloadImage() {
            // –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - —Å–æ–∑–¥–∞–µ–º canvas —Å –¥–∞–Ω–Ω—ã–º–∏
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 800;
            canvas.height = 1000;
            
            // –ó–∞–ª–∏–≤–∫–∞ —Ñ–æ–Ω–∞
            const gradient = ctx.createLinearGradient(0, 0, 800, 1000);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 800, 1000);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
            ctx.fillStyle = 'white';
            ctx.font = 'bold 32px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('–¢–†–ï–ö–ï–† –ü–†–ò–í–´–ß–ï–ö - 21 –î–ï–ù–¨', 400, 60);
            
            const data = collectData();
            ctx.font = '20px Arial';
            ctx.fillText(`–ü—Ä–∏–≤—ã—á–∫–∞: ${data.habit}`, 400, 120);
            ctx.fillText(`–ü—Ä–æ–≥—Ä–µ—Å—Å: ${completedDays}/21 –¥–Ω–µ–π`, 400, 160);
            
            // –°–∫–∞—á–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'moy-tracker-privychek.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            alert('üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ! –ú–æ–∂–µ—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö.');
        }
        
        function shareProgress() {
            const data = collectData();
            const text = `üéØ –ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å: ${completedDays}/21 –¥–Ω–µ–π!\n\n–ü—Ä–∏–≤—ã—á–∫–∞: ${data.habit}\n\n${completedDays === 21 ? 'üéâ –¶–ï–õ–¨ –î–û–°–¢–ò–ì–ù–£–¢–ê!' : 'üí™ –ü—Ä–æ–¥–æ–ª–∂–∞—é —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ —Å–æ–±–æ–π!'}\n\n#21–¥–µ–Ω—å #–ø—Ä–∏–≤—ã—á–∫–∏ #–ó–û–ñ`;
            
            if (navigator.share) {
                navigator.share({
                    title: '–ú–æ–π —Ç—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫',
                    text: text
                });
            } else {
                navigator.clipboard.writeText(text).then(() => {
                    alert('üì± –¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –ú–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –ª—é–±—É—é —Å–æ—Ü—Å–µ—Ç—å.');
                });
            }
        }
        
        function collectData() {
            return {
                habit: document.getElementById('habit').value || '–ú–æ—è –Ω–æ–≤–∞—è –ø—Ä–∏–≤—ã—á–∫–∞',
                trigger: document.getElementById('trigger').value || '',
                minimum: document.getElementById('minimum').value || '',
                notes1: document.getElementById('notes1').value || '',
                notes2: document.getElementById('notes2').value || '',
                notes3: document.getElementById('notes3').value || '',
                reflection: document.getElementById('reflection').value || '',
                completedDays: Array.from(document.querySelectorAll('.day-item.completed')).map(item => item.dataset.day)
            };
        }
        
        function generatePDFContent(data) {
            return `
–¢–†–ï–ö–ï–† –ü–†–ò–í–´–ß–ï–ö - 21 –î–ï–ù–¨
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–ü–†–ò–í–´–ß–ö–ê: ${data.habit}
–¢–†–ò–ì–ì–ï–†: ${data.trigger}
–ú–ò–ù–ò–ú–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø: ${data.minimum}

–ü–†–û–ì–†–ï–°–°: ${completedDays}/21 –¥–Ω–µ–π (${Math.round((completedDays/21)*100)}%)

–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –î–ù–ò: ${data.completedDays.join(', ')}

–ù–ï–î–ï–õ–Ø 1 - –§–û–†–ú–ò–†–û–í–ê–ù–ò–ï:
${data.notes1}

–ù–ï–î–ï–õ–Ø 2 - –£–ö–†–ï–ü–õ–ï–ù–ò–ï:
${data.notes2}

–ù–ï–î–ï–õ–Ø 3 - –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø:
${data.notes3}

–ò–¢–û–ì–û–í–ê–Ø –†–ï–§–õ–ï–ö–°–ò–Ø:
${data.reflection}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç—Ä–µ–∫–µ—Ä–∞ –ø—Ä–∏–≤—ã—á–µ–∫
–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ${new Date().toLocaleDateString('ru-RU')}
            `;
        }
        
        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
        function saveData() {
            if (typeof(Storage) !== "undefined") {
                const data = collectData();
                localStorage.setItem('habitTracker', JSON.stringify(data));
            }
        }
        
        function loadData() {
            if (typeof(Storage) !== "undefined") {
                const saved = localStorage.getItem('habitTracker');
                if (saved) {
                    const data = JSON.parse(saved);
                    document.getElementById('habit').value = data.habit || '';
                    document.getElementById('trigger').value = data.trigger || '';
                    document.getElementById('minimum').value = data.minimum || '';
                    document.getElementById('notes1').value = data.notes1 || '';
                    document.getElementById('notes2').value = data.notes2 || '';
                    document.getElementById('notes3').value = data.notes3 || '';
                    document.getElementById('reflection').value = data.reflection || '';
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –¥–Ω–∏
                    data.completedDays?.forEach(day => {
                        const dayElement = document.querySelector(`[data-day="${day}"]`);
                        if (dayElement) dayElement.classList.add('completed');
                    });
                    
                    updateProgress();
                }
            }
        }
        
        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
        document.addEventListener('input', saveData);
        document.addEventListener('click', saveData);
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        window.addEventListener('load', loadData);
    </script>
</body>
</html>
